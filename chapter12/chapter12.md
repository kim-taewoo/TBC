# CHAPTER 12

> "I can do this all day!"  _Captain America

## 12.3 변수의 영역과 연결 상태, 객체의 지속시간
전역변수는 file scope variable, 즉 파일 영역 변수라고도 하는데, 전역변수라고 주로 부르는 이유는 기본적으로 `main()` 함수 밖에 있는 변수나 함수는 다른 파일에서도 쓸 수 있기 때문이다. 즉, 내가 어떤 파일의 file scope(`main()` 밖)에 정의한 변수나 함수는 다른 파일에서 앞에 `extern` 이란 키워드를 붙여 다른 파일에서 가져다 쓸 것임을 표시할 수 있다. 이 때 처음 정의된 곳은 defining declaration 했다고 하고, 다른 파일에서 그 전역변수나 함수를 불러다 쓰기 위해 `extern` 키워드를 붙여 다시 선언한 것은 referencing declaration이라고 한다. 이런 전역변수간의 외부 연결은 컴파일러가 파일들을 링킹할 때 알아서 다른 파일에서 찾아다 연결해준다.  이 `extern` 키워드는 외부 파일 뿐 아니라 같은 파일 내에서도 새로 지역변수를 선언하는 게 아니라 전역변수를 쓸 것임을 알리기 위해서도 붙인다. **그런데 이 `extern` 키워드는 대부분의 경우 생략되며, 문맥을 명확히 하기 위해 명시적으로 붙일 때만 쓴다. 붙이는 습관을 들이는 게 좋다.** 

`static` 키워드를 붙여 전역변수를 선언해주면, 외부 연결이 막힌다. `static` 키워드가 file scope with internal linkage 로 linkage type 을 제한하는 것이다.

## 12.4 ~ 12.9 저장 공간의 다섯 가지 분류 (Storage Classes)
1. 자동(Automatic)
   * 메모리 위치 : 스택
   * 지속 시간 : 자동적으로 결정됨
   * 영역 : 블록 안
   * 연결 : 없음
   * 선언 방법 : 블록 안 선언 (지역 변수)

   자동 변수임을 나타내기 위해 `auto` 라는 키워드를 앞에 쓸 수 있고, 실제로 이게 생략되어 있다고도 볼 수 있는데,(예: auto int a;) 이건 <u>c++ 에서 자료형을 추론하기 위해 사용하는 `auto` 랑은 전혀 다른 것이다.. 주의하자.</u>

   **자동 변수(지역 변수) 는 반드시 초기화해주어야 한다.**

1. 레지스터(Register)
   * 메모리 위치 : 레지스터(또는 스택)
   * 지속 시간 : 자동적으로 결정됨
   * 영역 : 블록 안
   * 연결 : 없음
   * 선언 방법 : register 키워드 선언(컴파일러가 알아서 하기도 함)

   레지스터는 CPU 의 작업공간. cpu 와 메모리는 물리적으로 분리되어 있고, bus 를 통해 데이터를 주고 받는데, 레지스터는 cpu 가 가지고 있는 일종의 메모리라, bus 를 통할 필요가 없어서 엄청나게 빠르다. 

   요즘은 잘 안 쓴다. 

1. 고정적, 내부 연결(Static with internal linkage)
   * 메모리 위치 : 데이터 또는 BSS
   * 지속 시간 : 고정적 (정적)
   * 영역 : 파일 안
   * 연결 : 번역 단위의 내부에서만 사용
   * 선언 방법 : 모든 함수들 밖에서 static 키워드 사용
   
1. 고정적, 외부 연결(Static with external linkage)
   * 메모리 위치 : 데이터 또는 BSS
   * 지속 시간 : 고정적
   * 영역 : 파일 안
   * 연결 : 번역 단위의 외부로 연결 가능
   * 선언 방법 : 모든 함수들 밖 선언 (전역 변수)

1. 고정적, 연결 없음(Static with no linkage)
   * 메모리 위치 : 데이터 또는 BSS
   * 지속 시간 : 고정적
   * 영역 : 블록 안
   * 연결 : 없음
   * 선언 방법 : 블록 안에서 static 키워드 사용

> "모든 것이 완벽하다면, 배울 수도 없고 성장할 수도 없다."  _비욘세 지젤 놀스